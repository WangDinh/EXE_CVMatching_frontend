import {
  EditOutlined,
  FileSearchOutlined,
  LoginOutlined,
  MenuFoldOutlined,
  MenuUnfoldOutlined
} from '@ant-design/icons'
import type { MenuProps } from 'antd'
import { Button, Layout, Menu, theme } from 'antd'
import React, { useState } from 'react'
import { Link, Outlet, useLocation, useNavigate } from 'react-router-dom'
import CommonFooter from '../Common/footer'

const { Header, Content, Sider } = Layout

type MenuItem = Required<MenuProps>['items'][number]

function getItem(label: React.ReactNode, key: React.Key, icon?: React.ReactNode, children?: MenuItem[]): MenuItem {
  return {
    key,
    icon,
    children,
    label
  } as MenuItem
}

const items: MenuItem[] = [
  getItem(
    <Link to='/feature/job'>Job</Link>,
    '/feature/job',
    <svg
      className='icon'
      style={{
        width: '1em',
        height: '1em',
        verticalAlign: 'middle',
        fill: 'white',
        overflow: 'hidden'
      }}
      viewBox='0 0 1024 1024'
      version='1.1'
      xmlns='http://www.w3.org/2000/svg'
      p-id='689'
    >
      <path
        d='M960 960 64 960c-38.4 0-64-25.6-64-64L0 576 0 512 0 256c0-38.4 25.6-64 64-64l256 0L320 128c0-38.4 25.6-64 64-64l256 0c38.4 0 64 25.6 64 64l0 64 256 0c38.4 0 64 25.6 64 64l0 256 0 64 0 320C1024 934.4 998.4 960 960 960zM640 160C640 140.8 627.2 128 608 128l-192 0C396.8 128 384 140.8 384 160L384 192l256 0L640 160zM960 320c0-38.4-25.6-64-64-64L128 256C89.6 256 64 281.6 64 320l0 192 256 0L320 448c0-38.4 25.6-64 64-64l256 0c38.4 0 64 25.6 64 64l0 64 256 0L960 320zM384 512l0 64c0 38.4 25.6 64 64 64l128 0c38.4 0 64-25.6 64-64L640 512c0-38.4-25.6-64-64-64L448 448C409.6 448 384 473.6 384 512zM960 576l-256 0 0 64c0 38.4-25.6 64-64 64L384 704c-38.4 0-64-25.6-64-64L320 576 64 576l0 256c0 38.4 25.6 64 64 64l768 0c38.4 0 64-25.6 64-64L960 576z'
        fill='white'
        p-id='690'
      ></path>
    </svg>
  ),
  getItem(<Link to='/feature/cv'>Resume</Link>, '/feature/cv', <FileSearchOutlined />),
  getItem(
    <Link to='/feature/matchingcv'>Matching Resumes</Link>,
    '/feature/matchingcv',
    <svg
      className='icon'
      style={{
        width: '1em',
        height: '1em',
        verticalAlign: 'middle',
        fill: 'white',
        overflow: 'hidden'
      }}
      viewBox='0 0 1024 1024'
      version='1.1'
      xmlns='http://www.w3.org/2000/svg'
      p-id='2428'
    >
      <path
        d='M633.177654 507.105842a17.062029 17.062029 0 0 0-24.125709 24.142771L790.011821 712.208489c13.308382 13.308382 13.308382 34.960097 0 48.268479a34.209367 34.209367 0 0 1-48.268479 0L560.783466 579.50003a17.044967 17.044967 0 1 0-24.125708 24.125708l229.228355 229.228355a34.141119 34.141119 0 0 1-48.268479 48.268479L500.469195 663.957072a17.044967 17.044967 0 1 0-24.125708 24.125708l193.02273 193.02273c13.308382 13.308382 13.308382 34.960097 0 48.268479-12.898894 12.898894-35.352523 12.898894-48.251417-0.017062l-24.142771-24.125708h-0.017062l-156.817105-156.817106a17.044967 17.044967 0 1 0-24.125709 24.125709l156.834168 156.834167c6.449447 6.449447 9.998349 15.014585 9.998348 24.142771 0 9.111123-3.548902 17.676262-9.998348 24.125708a34.158181 34.158181 0 0 1-48.251417-0.017062L234.386859 687.690354c-44.24184-44.24184-53.847762-100.017612-62.327591-149.241565-7.131928-41.409544-13.871429-80.515713-40.044581-106.688865a17.044967 17.044967 0 1 0-24.125709 24.125708c18.512301 18.512301 24.091584 50.878969 30.541031 88.364247 8.872255 51.527326 19.928449 115.663492 71.831141 167.566183l290.208045 289.952115a68.04337 68.04337 0 0 0 48.251417 19.962573 68.145742 68.145742 0 0 0 48.251417-19.962573 67.940998 67.940998 0 0 0 18.717046-34.977159c25.012934 12.062854 57.584347 6.961308 77.80285-13.29132a67.87275 67.87275 0 0 0 18.717046-34.994221 68.350487 68.350487 0 0 0 77.80285-13.274258 68.299301 68.299301 0 0 0 0-96.502834l-6.466509-6.483571a68.026308 68.026308 0 0 0 30.60928-17.642138 68.350487 68.350487 0 0 0 0-96.519896L633.177654 507.105842M909.804324 363.511809c-27.725797 27.725797-37.246409 72.888986-46.442842 116.56778-8.15565 38.764929-16.601354 78.877758-37.144036 99.420441l-24.142771 24.125708a17.062029 17.062029 0 0 0 24.142771 24.125709l24.125708-24.125709c27.708735-27.708735 37.212284-72.854862 46.408718-116.516593 8.172712-38.799053 16.635478-78.911882 37.178161-99.471627a17.044967 17.044967 0 1 0-24.125709-24.125709'
        fill='white'
        p-id='2429'
      ></path>
      <path
        d='M273.288284 470.91728c0 9.128185 3.565964 17.693324 10.015411 24.125708l12.062854 12.062854a84.747096 84.747096 0 0 0 60.314271 24.97881 84.798282 84.798282 0 0 0 60.331333-24.97881l84.985965-84.985964a186.232043 186.232043 0 0 0 120.048434 43.422863h0.08531a186.829214 186.829214 0 0 0 132.844955-55.127415 17.044967 17.044967 0 1 0-24.125709-24.125708 152.926963 152.926963 0 0 1-108.736308 45.129065h-0.051186a152.48335 152.48335 0 0 1-108.531565-44.958445 17.062029 17.062029 0 0 0-24.125708 0l-96.536958 96.519896c-19.314216 19.331278-53.045847 19.331278-72.377126 0l-12.062854-12.062854 205.102646-205.102647c19.126534-19.126534 37.297595-19.126534 60.314272-19.126534 24.637569 0 55.332159 0 84.457041-29.124883l48.251417-48.268479a17.044967 17.044967 0 1 0-24.125708-24.125708l-48.251417 48.268479c-19.143596 19.126534-37.314657 19.126534-60.331333 19.126534-24.637569 0-55.315097 0-84.43998 29.124883l-205.085584 205.085584c-6.466509 6.449447-10.032473 15.014585-10.032473 24.142771M319.492257 241.688925l48.251417 48.251417a16.993781 16.993781 0 0 0 24.125709 0 17.044967 17.044967 0 0 0 0-24.125709l-48.251417-48.251417a17.044967 17.044967 0 1 0-24.125709 24.125709M319.697002 141.705437l-102.372172-102.372172a17.044967 17.044967 0 1 0-24.125709 24.125709L283.508439 153.768291 5.516806 431.759924a17.044967 17.044967 0 1 0 24.125709 24.125708l290.054487-290.054486a17.044967 17.044967 0 0 0 0-24.125709M1019.240176 363.511809L741.248543 85.520177l56.185261-56.185261A17.044967 17.044967 0 1 0 773.308095 5.209208l-68.248114 68.248115a17.044967 17.044967 0 0 0 0 24.125708l290.054486 290.054487a17.010843 17.010843 0 0 0 24.125709 0 17.044967 17.044967 0 0 0 0-24.125709M420.158226 986.651219c-9.50355 4.982112-25.729539 5.579283-40.351697-9.008751-14.622159-14.639221-14.502724-31.650063-9.759481-39.054983a17.044967 17.044967 0 0 0-26.429082-21.27635 34.192305 34.192305 0 0 1-48.268479 0 34.192305 34.192305 0 0 1 0-48.268479 16.942594 16.942594 0 0 0 4.999174-12.062854 17.062029 17.062029 0 0 0-29.124883-12.062855l-12.062854 12.062855c-13.29132 13.308382-34.960097 13.308382-48.251417 0a34.175243 34.175243 0 0 1 0-48.251417l12.062854-12.062855a17.062029 17.062029 0 0 0-20.61093-26.838571c-9.281744 5.357477-25.610105 4.726182-39.703341-9.349991-14.980461-14.980461-14.912213-31.581815-10.083659-38.577247a17.062029 17.062029 0 0 0-28.084099-19.382465c-13.803181 19.996698-13.427817 54.615554 14.04205 82.08542 10.817326 10.800264 22.590126 17.249711 34.192305 20.337938a68.026308 68.026308 0 0 0-5.937586 27.913479 68.265177 68.265177 0 0 0 84.730034 66.217733 67.975122 67.975122 0 0 0 19.706643 42.365017 68.299301 68.299301 0 0 0 62.566459 18.461115c2.115692 14.12736 8.957565 28.920139 21.890583 41.870219 15.782376 15.765314 34.209367 22.078265 51.032528 22.078265 10.800264 0 20.935109-2.61049 29.278441-6.97837a17.062029 17.062029 0 1 0-15.833563-30.216853'
        fill='white'
        p-id='2430'
      ></path>
      <path
        d='M154.07589 187.892349c18.819418 0 34.124057-15.30464 34.124057-34.124058s-15.30464-34.124057-34.124057-34.124057-34.124057 15.30464-34.124058 34.124057 15.30464 34.124057 34.124058 34.124058M870.681093 119.644234c18.802356 0 34.124057-15.30464 34.124057-34.124057s-15.321702-34.124057-34.124057-34.124058c-18.802356 0-34.124057 15.30464-34.124058 34.124058s15.321702 34.124057 34.124058 34.124057'
        fill='white'
        p-id='2431'
      ></path>
    </svg>
  ),
  getItem(<Link to='/feature/exam'>Exam</Link>, '/feature/exam', <EditOutlined />)
  // getItem(<Link to='/feature/setting'>Setting</Link>, '/feature/setting', <SettingOutlined />)
]

const FeatureLayout: React.FC = () => {
  const navigate = useNavigate()
  const [collapsed, setCollapsed] = useState(false)
  const {
    token: { colorBgContainer, borderRadiusLG }
  } = theme.useToken()
  console.log(colorBgContainer)
  const location = useLocation()
  const defaultSelectedKey = items.find((item) => item?.key === location.pathname)?.key as string
  return (
    <Layout style={{ minHeight: '100vh' }}>
      <Sider width={250} trigger={null} collapsible collapsed={collapsed} collapsedWidth={0}>
        <Link to='/'>
          <div className='px-6 h-14 text-lg text-white flex items-center bg-[#111827]'>
            Ranksume <b className='font-[900]'>Job&CV</b>
          </div>
        </Link>
        <p className='uppercase px-6 py-3 text-[#9ca3af]'>Features</p>
        <Menu defaultSelectedKeys={[defaultSelectedKey]} mode='inline' items={items} />
      </Sider>
      <Layout>
        <Header style={{ padding: 0, background: colorBgContainer }}>
          <div className='w-full h-[64px] flex items-center justify-between'>
            <Button
              type='text'
              icon={collapsed ? <MenuUnfoldOutlined /> : <MenuFoldOutlined />}
              onClick={() => setCollapsed(!collapsed)}
              style={{
                fontSize: '16px',
                width: 64,
                height: 64
              }}
            />
            <Button
              type='text'
              icon={<LoginOutlined />}
              onClick={() => navigate('/')}
              style={{
                fontSize: '16px',
                width: 64,
                height: 64
              }}
            />
          </div>
        </Header>
        <Content>
          <div
            style={{
              // margin: '24px 16px',
              // padding: 24,
              minHeight: 360,
              background: colorBgContainer,
              borderRadius: borderRadiusLG,
              height: '100%'
            }}
          >
            <Outlet />
          </div>
        </Content>
        <CommonFooter />
      </Layout>
    </Layout>
  )
}

export default FeatureLayout
